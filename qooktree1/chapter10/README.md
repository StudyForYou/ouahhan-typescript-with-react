<h1>ìƒíƒœ ê´€ë¦¬</h1>

# ğŸ“ ìƒíƒœ ê´€ë¦¬

## âœï¸ ìƒíƒœ(State)

- ë Œë”ë§ ê²°ê³¼ì— ì˜í–¥ì„ ì£¼ëŠ” ì •ë³´ë¥¼ ë‹´ì€ ìˆœìˆ˜ JS ê°ì²´
- ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ ê²°ê³¼ë¬¼ì— ì˜í–¥ì„ ì¤€ë‹¤.
- ì§€ì—­ ìƒíƒœ, ì „ì—­ ìƒíƒœ, ì„œë²„ ìƒíƒœë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤.

### ì§€ì—­ ìƒíƒœ(Local State)

- ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì‚¬ìš©ë˜ëŠ” ìƒíƒœë¡œ ì£¼ë¡œ useState í›…ì„ ì“°ë©° useReducerì™€ ê°™ì€ í›…ë„ ì‚¬ìš©ëœë‹¤.

### ì „ì—­ ìƒíƒœ(Global State)

- ì•± ì „ì²´ì—ì„œ ê³µìœ í•˜ëŠ” ìƒíƒœ
- ìƒíƒœê°€ ë³€ê²½ë˜ë©´ ì „ì—­ìƒíƒœë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ë„ ì—…ë°ì´íŠ¸ëœë‹¤.
- ë˜í•œ `Prop drilling` ë¬¸ì œë¥¼ í”¼í•˜ê³ ì ì§€ì—­ìƒíƒœë¥¼ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë“¤ ì‚¬ì´ì˜ ì „ì—­ ìƒíƒœë¡œ ê³µìœ í•  ìˆ˜ ìˆë‹¤.

#### Prop drilling?

- propsë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì—ì„œ ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ëŠ” í•´ë‹¹ ë°ì´í„°ê°€ í•„ìš”í•˜ì§€ ì•ŠìŒì—ë„ ìì‹ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•˜ê¸° ìœ„í•´ propsë¥¼ ì „ë‹¬í•´ì•¼ í•˜ëŠ” ê³¼ì •
- ì»´í¬ë„ŒíŠ¸ì˜ ìˆ˜ê°€ ë§ì•„ì§€ë©´ Prop drillingìœ¼ë¡œ ì¸í•´ ì½”ë“œê°€ í›¨ì”¬ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤.

### ì„œë²„ ìƒíƒœ(Server State)

- ì‚¬ìš©ì ì •ë³´, ê¸€ ëª©ë¡ ë“± ì™¸ë¶€ ì„œë²„ì— ì €ì¥í•´ì•¼ í•˜ëŠ” ìƒíƒœ
- react-query, SWRê³¼ ê°™ì€ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê´€ë¦¬í•˜ê¸°ë„ í•©ë‹ˆë‹¤.

## âœï¸ ìƒíƒœë¥¼ ì˜ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê°€ì´ë“œ

- `ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë  ë•Œë§ˆë‹¤ ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ìœ ì§€ë³´ìˆ˜ ë° ì„±ëŠ¥ ê´€ì ì—ì„œ ìƒíƒœì˜ ê°œìˆ˜ë¥¼ ìµœì†Œí™”í•˜ëŠ” ê²ƒì´ ë°”ëŒì§í•˜ë‹¤.`
- ê°€ëŠ¥í•˜ë‹¤ë©´ ìƒíƒœê°€ ì—†ëŠ” Stateless ì»´í¬ë„ŒíŠ¸ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
- ì–´ë–¤ ê°’ì„ ìƒíƒœë¡œ ì •ì˜í•  ë•ŒëŠ” ë‹¤ìŒ 2ê°€ì§€ ì‚¬í•­ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤.
  - ì‹œê°„ì´ ì§€ë‚˜ë„ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ìƒíƒœê°€ ì•„ë‹ˆë‹¤.
  - íŒŒìƒëœ ê°’ì€ ìƒíƒœê°€ ì•„ë‹ˆë‹¤.

### ì‹œê°„ì´ ì§€ë‚˜ë„ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ìƒíƒœê°€ ì•„ë‹ˆë‹¤.

- ì‹œê°„ì´ ì§€ë‚˜ë„ ë³€í•˜ì§€ ì•ŠëŠ” ê°’ì´ë¼ë©´, `ê°ì²´ ì°¸ì¡° ë™ì¼ì„±ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•`ì„ ê³ ë ¤í•  ìˆ˜ ìˆë‹¤.
- ì¦‰, ë‘ ê°œì˜ ê°ì²´ê°€ ë™ì¼í•œ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ì§€ê³  ìˆëŠ” ë°©ë²•ì„ ì´ìš©í•˜ìëŠ” ë§ì´ë‹¤.
- ë§Œì•½ ë‹¨ìˆœíˆ ìƒìˆ˜ ë³€ìˆ˜ì— ì €ì¥í•˜ì—¬ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´, ë Œë”ë§ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— Contextë‚˜ props ë“±ìœ¼ë¡œ ì „ë‹¬í–ˆì„ ì‹œ ë§¤ë²ˆ ë‹¤ë¥¸ ê°ì²´ë¡œ ì¸ì‹ë˜ì–´ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì´ ìì£¼ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

### ê°ì²´ ì°¸ì¡° ë™ì¼ì„±ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•

#### 1. ë©”ëª¨ì´ì œì´ì…˜(useMemo)

```ts
const store = useMemo(() => new Store(), []);
```

- `useMemo`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œë§Œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì´í›„ ë Œë”ë§ì—ì„œëŠ” ì´ì „ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¬í™œìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
- í•˜ì§€ë§Œ `useMemoëŠ” ì˜¤ë¡œì§€ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ìš©ë„ë¡œë§Œ ì‚¬ìš©í•˜ë¼ê³  ê³µì‹ë¬¸ì„œì— ì–¸ê¸‰`ë˜ì–´ìˆìœ¼ë©° ë¦¬ì•¡íŠ¸ëŠ” ë©”ëª¨ë¦¬ í™•ë³´ë¥¼ ìœ„í•´ ì´ì „ ë©”ëª¨ì´ì œì´ì…˜ ë°ì´í„°ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆë‹¤.
- ë”°ë¼ì„œ useMemoê°€ ì—†ì–´ë„ ì˜¬ë°”ë¥´ê²Œ ì‘ë™ë˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•œ ë’¤ ì„±ëŠ¥ê°œì„ ì„ ëª©í‘œë¡œ useMemoë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ì ì ˆí•œ ì ‘ê·¼ ë°©ì‹ì´ë‹¤

#### 2. useStateì˜ ì´ˆê¸°ê°’ë§Œ ì§€ì •í•˜ëŠ” ë°©ë²•

- `useState(new Store())` ì˜ ë°©ì‹ì€ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ê°€ ì‚¬ìš©ë˜ì§€ ì•Šë”ë¼ë„ ë Œë”ë§ë§ˆë‹¤ ìƒì„±ë˜ì–´ ì´ˆê¹ƒê°’ ì„¤ì •ì— í° ë¹„ìš©ì´ ì†Œëª¨ë  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ `useState(()=> new Store())`ì™€ ê°™ì´ ì´ˆê¹ƒê°’ì„ ê³„ì‚°í•˜ëŠ” ì½œë°±ì„ ì§€ì •í•˜ëŠ” ë°©ì‹(ì§€ì—° ì´ˆê¸°í™” ë°©ì‹)ì„ ì‚¬ìš©í•œë‹¤.
- ë”°ë¼ì„œ ì§€ì—° ì´ˆê¸°í™” ë°©ì‹ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê·¸ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•Œë§Œ ë Œë”ë§ì´ ëœë‹¤.
- ë‹¤ë§Œ useStateë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ê¸°ìˆ ì ìœ¼ë¡œëŠ” ì˜ ë™ì‘í•  ìˆ˜ ìˆì§€ë§Œ, ì˜ë¯¸ë¡ ì ìœ¼ë¡œ ë´¤ì„ ë•ŒëŠ” ì¢‹ì€ ë°©ë²•ì´ ì•„ë‹ˆë‹¤.
  - ì²˜ìŒì—ëŠ” ìƒíƒœë¥¼ ì‹œê°„ì´ ì§€ë‚˜ë©´ì„œ ë³€í™”ë˜ì–´ ë Œë”ë§ì— ì˜í–¥ì„ ì£¼ëŠ” ë°ì´í„°ë¡œ ì •ì˜í—€ì§€ë§Œ, í˜„ì¬ì˜ ëª©ì ì€ ëª¨ë“  ë Œë”ë§ ê³¼ì •ì—ì„œ ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ë™ì¼í•˜ê²Œ ìœ ì§€í•˜ê³ ì í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.

#### 3. useRef

- ë¦¬ì•¡íŠ¸ ê³µì‹ ë¬¸ì„œì— ë”°ë¥´ë©´ useRefê°€ ë™ì¼í•œ ê°ì²´ ì°¸ì¡°ë¥¼ ìœ ì§€í•˜ë ¤ëŠ” ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸°ì— ê°€ì¥ ì í•©í•œ í›…ì´ë‹¤.
- useRefì˜ ì¸ìë¡œ ì§ì ‘ `new Store()`ë¥¼ ì‚¬ìš©í•˜ë©´ useStateì™€ ë§ˆì°¬ê°€ì§€ë¡œ ë Œë”ë§ë§ˆë‹¤ ë¶ˆí•„ìš”í•œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•´ì¤˜ì•¼ í•œë‹¤.

```js
const store = useRef < Store > null;
if (!store.current) store.current = new Store();
```

### íŒŒìƒëœ ê°’ì€ ìƒíƒœê°€ ì•„ë‹ˆë‹¤.

#### ë¶€ëª¨ì—ê²Œì„œ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆëŠ” propsì´ê±°ë‚˜ ê¸°ì¡´ ìƒíƒœì—ì„œ ê³„ì‚°ë  ìˆ˜ ìˆëŠ” ê°’ì€ ìƒíƒœê°€ ì•„ë‹ˆë‹¤.

- SSOTëŠ” `ì–´ë– í•œ ë°ì´í„°ë„ ë‹¨ í•˜ë‚˜ì˜ ì¶œì²˜ì—ì„œ ìƒì„±í•˜ê³  ìˆ˜ì •í•´ì•¼ í•œë‹¤ëŠ” ì›ì¹™ì„ ì˜ë¯¸í•˜ëŠ” ë°©ë²•ë¡ `ì´ë‹¤. ë¦¬ì•¡íŠ¸ì—ì„œ ìƒíƒœë¥¼ ì •ì˜í•  ë•Œë„ ì´ë¥¼ ê³ ë ¤í•´ì•¼ í•œë‹¤.
- ë‹¤ë¥¸ ê°’ì—ì„œ íŒŒìƒëœ ê°’ì„ ìƒíƒœë¡œ ê´€ë¦¬í•˜ê²Œ ë˜ë©´ ê¸°ì¡´ ì¶œì²˜ì™€ëŠ” ë‹¤ë¥¸ ìƒˆë¡œìš´ ì¶œì²˜ì—ì„œ ê´€ë¦¬í•˜ê²Œ ë˜ëŠ” ê²ƒì´ë¯€ë¡œ í•´ë‹¹ ë°ì´í„°ì˜ ì •í™•ì„±ê³¼ ì¼ê´€ì„±ì„ ë³´ì¥í•˜ê¸° ì–´ë µë‹¤.

```tsx
import { useState, ChangeEvent } from "react";
type UserEmailProps = {
  initialEmail: string;
};

const UserEmail = ({ initialEmail }: UserEmailProps) => {
  const [email, setEmail] = useState(initialEmail);

  const onChangeEmail = (event: ChangeEvent<HTMLInputElement>) => {
    setEmail(event.target.value);
  };

  return <input type="text" value={email} onChange={onChangeEmail} />;
};
```

- ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ì „ë‹¬ë°›ì€ initialEmail propì˜ ê°’ì´ ë³€ê²½ë˜ì–´ë„ input íƒœê·¸ì˜ valueëŠ” ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤.
- useStateì˜ ì´ˆê¸°ê°’ìœ¼ë¡œ ì„¤ì •í•œ ê°’ì€ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ í•œ ë²ˆë§Œ email ìƒíƒœì˜ ê°’ìœ¼ë¡œ ì„¤ì •ë˜ë©° ì´í›„ì—ëŠ” ë…ìì ìœ¼ë¡œ ê´€ë¦¬ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

#### ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ë‘ ì¶œì²˜ ê°„ì˜ ë°ì´í„°ë¥¼ ë™ê¸°í™”í•˜ê¸°ë³´ë‹¤ëŠ” ë‹¨ì¼í•œ ì¶œì²˜ì—ì„œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤.

- ì¼ë°˜ì ìœ¼ë¡œ ë¦¬ì•¡íŠ¸ì—ì„œëŠ” ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ë„ë¡ í•´ì£¼ëŠ” `ìƒíƒœ ëŒì–´ì˜¬ë¦¬ê¸° ê¸°ë²•(Lifting State Up)ì„ ì‚¬ìš©í•œë‹¤.`

```tsx
import { useState, Dispatch, SetStateAction, ChangeEvent } from "react";

type UserEmailProps = {
  email: string;
  setEmail: Dispatch<SetStateAction<string>>;
};

const UserEmail = ({ email, setEmail }: UserEmailProps) => {
  const onChangeEmail = (event: ChangeEvent<HTMLInputElement>) => {
    setEmail(event.target.value);
  };
  return <input type="text" value={email} onChange={onChangeEmail} />;
};
```

#### ë‹¤ë¥¸ ì˜ˆì‹œ

```tsx
const [items, setItmes] = useState<Item[]>([]);
const [selectedItems, setSelectedItems] = useState<Item[]>([]);

useEffect(() => {
  setSelectedItems(items.filter((item) => item.isSelected));
}, [items]);
```

- ì´ëŸ¬í•œ ë°©ë²•ì˜ ê°€ì¥ í° ë¬¸ì œì ì€ itemsì™€ selectedItemsê°€ ë™ê¸°í™”ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤.
- ì—¬ëŸ¬ ìƒíƒœê°€ ë³µì¡í•˜ê²Œ ì–½í˜€ìˆìœ¼ë©´ íë¦„ì„ íŒŒì•…í•˜ê¸° ì–´ë µê³  ì˜ë„ì¹˜ ì•Šê²Œ ë™ê¸°í™” ê³¼ì •ì´ ëˆ„ë½ë  ìˆ˜ ìˆë‹¤.

- ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ìœ¼ë¡œëŠ” ìƒíƒœë¡œ ì •ì˜í•˜ì§€ ì•Šê³  ê³„ì‚°ëœ ê°’ì„ JS ë³€ìˆ˜ì— ë‹´ëŠ” ê²ƒì´ë‹¤.

  ```tsx
  // ì„±ëŠ¥ì ì¸ ì¸¡ë©´ì—ì„œ itemsê°’ì´ ë°”ë€”ë•Œë§Œ ë Œë”ë§ì´ ë˜ê¸° ë•Œë¬¸ì— ìœ„ì˜ ì˜ˆì œë³´ë‹¤ ë Œë”ë§ íšŸìˆ˜ê°€ ì¤„ì–´ë“ ë‹¤.
  const [items, setItems] = useState<Item[]>([]);
  const selectedItems = items.filter((item) => item.isSelected);
  ```

  - ë‹¤ë§Œ ì´ ê²½ìš°ì—ëŠ” ë§¤ë²ˆ ë Œë”ë§ë  ë•Œë§ˆë‹¤ ê³„ì‚°ì„ ìˆ˜í–‰í•˜ê²Œ ë˜ë¯€ë¡œ ê³„ì‚° ë¹„ìš©ì´ í¬ë‹¤ë©´ `useMemo`ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.

    ```ts
    const [items, setItems] = useState<Item[]>([]);
    const selectedItems = useMemo(
      () => veryExpensiveCalculation(items),
      [items]
    );
    ```

### useState vs useReducer, ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?

- useState ëŒ€ì‹  useReducer ì‚¬ìš©ì„ ê¶Œì¥í•˜ëŠ” ê²½ìš°ëŠ” í¬ê²Œ ë‘ ê°€ì§€ê°€ ìˆë‹¤.
  1. ë‹¤ìˆ˜ì˜ í•˜ìœ„ í•„ë“œë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ë³µì¡í•œ ìƒíƒœ ë¡œì§ì„ ë‹¤ë£° ë•Œ
  2. ë‹¤ìŒ ìƒíƒœê°€ ì´ì „ ìƒíƒœì— ì˜ì¡´ì ì¼ ë•Œ

```ts
// ë‚ ì§œ ë²”ìœ„ ê¸°ì¤€ - ì˜¤ëŠ˜, 1ì£¼ì¼, 1ê°œì›”
type DateRangePreset = "TODAY" | "LAST_WEEK" | "LAST_MONTH";
type ReviewRatingString = "1" | "2" | "3" | "4" | "5";

// ë¦¬ë·° ë‚ ì§œ í•„í„°ë§
interface ReviewFilter {
  stateDate: Date;
  endDate: Date;
  dateRangePreset: Nullable<DateRangePreset>;
  keywords: string[];
  ratings: ReviewRatingString[];
  // ...
}

interface State {
  filter: ReviewFilter;
  page: string;
  size: number;
}
```

- ì´ëŸ¬í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ useStateë¡œ ë‹¤ë£¬ë‹¤ë©´ ì ì¬ì ì¸ ì˜¤ë¥˜ ê°€ëŠ¥ì„±ì´ ì¦ê°€í•œë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´ í˜ì´ì§€ ê°’ë§Œ ì—…ë°ì´íŠ¸í•˜ê³  ì‹¶ì–´ë„ ìš°ì„  ì „ì²´ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì™€ì•¼í•˜ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ í•„ë“œê°€ ìˆ˜ì •ë  ìˆ˜ ìˆëŠ” ê°œë°œì ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
- ì´ëŸ´ ë•Œ `useReducer`ë¥¼ ì‚¬ìš©í•œë‹¤.

  ```tsx
  // Action ì •ì˜
  type Action =
    | { payload: ReviewFilter; type: "filter" }
    | { payload: number; type: "navigate" }
    | { payload: number; type: "resize" };

  // Reducer ì •ì˜
  const reducer: React.Reducer<State, Action> = (state, action) => {
    switch (action.type) {
      case "filter":
        return {
          filter: action.payload,
          page: 0,
          size: state.size,
        };
      case "navigate":
        return {
          filter: state.filter,
          page: action.payload,
          size: state.size,
        };
      case "resize":
        return {
          filter: state.filter,
          page: 0,
          size: action.payload,
        };
      default:
        return state;
    }
  };

  // useReducer ì‚¬ìš©
  const [state, dispatch] = useReducer(reducer, getDefaultState());

  //dispatch ì˜ˆì‹œ
  dispatch({ payload: filter, type: "filter" });
  dispatch({ payload: page, type: "navigate" });
  dispatch({ payload: size, type: "resize" });
  ```

  - useReducerëŠ” `ë¬´ì—‡ì„ ë³€ê²½í• ì§€`ì™€ `ì–´ë–»ê²Œ ë³€ê²½í• ì§€`ë¥¼ ë¶„ë¦¬í•˜ì—¬ `dispatch`ë¥¼ í†µí•´ ì–´ë–¤ ì‘ì—…ì„ í• ì§€ë¥¼ ì•¡ì…˜ìœ¼ë¡œ ë„˜ê¸°ê³  reducer í•¨ìˆ˜ ë‚´ì—ì„œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•œë‹¤.
  - ì´ë¡œì¨ ë³µì¡í•œ ìƒíƒœë¡œì§ì„ ìˆ¨ê¸°ê³  ì•ˆì •ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.

- ì´ì™¸ì—ë„ boolean ìƒíƒœë¥¼ í† ê¸€í•˜ëŠ” ì•¡ì…˜ë§Œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” useState ëŒ€ì‹  useReducerë¥¼ ì‚¬ìš©í•˜ê³¤ í•œë‹¤.

  ```tsx
  import { useReducer } from "react";

  // Before
  const [fold, setFold] = useState(true);
  const toggleFold = () => setFold((prev) => !prev);

  // After
  const [fold, toggleFold] = useReducer((v) => !v, true);
  ```

## âœï¸ ì „ì—­ ìƒíƒœ ê´€ë¦¬ì™€ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

- ìƒíƒœëŠ” ì‚¬ìš©í•˜ëŠ” ê³³ê³¼ ìµœëŒ€í•œ ê°€ê¹Œì›Œì•¼ í•˜ë©° ì‚¬ìš© ë²”ìœ„ë¥¼ ì œí•œí•´ì•¼ë§Œ í•œë‹¤.
- ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ë‰œë‹¤.
  - Context API + useState or useReducer
  - ì™¸ë¶€ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬(Redux, MobX, Recoil, Zustand ë“±)

### ì»¨í…ìŠ¤íŠ¸ API(Context API)

- ì „ì—­ì ìœ¼ë¡œ ê³µìœ í•´ì•¼ í•˜ëŠ” ë°ì´í„°ë¥¼ Contextë¡œ ì œê³µí•˜ê³  í•´ë‹¹ Contextë¥¼ **êµ¬ë…í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ** ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆê²Œ ëœë‹¤.
- ì—„ë°€í•˜ê²Œ ë§í•´ ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì†”ë£¨ì…˜ë³´ë‹¤ëŠ” ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°„ì— ê°’ì„ ê³µìœ í•˜ëŠ” ì†”ë£¨ì…˜ì— ê°€ê¹ë‹¤.
- ê·¸ëŸ¬ë‚˜ ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ì„±ëŠ¥ì´ ì¤‘ìš”í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê¶Œì¥ë˜ì§€ ì•ŠëŠ” ë°©ë²•ì´ë‹¤.
- ì»¨í…ìŠ¤íŠ¸ í”„ë¡œë°”ì´ë”ì˜ propsë¡œ ì£¼ì…ëœ ê°’ì´ë‚˜ ì°¸ì¡°ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•´ë‹¹ ì»¨í…ìŠ¤íŠ¸ë¥¼ êµ¬ë…í•˜ê³  ìˆëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë˜ê¸° ë•Œë¬¸ì— ì „ì—­ ìƒíƒœê°€ ë§ì•„ì§ˆìˆ˜ë¡ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ê³¼ ìƒíƒœì˜ ë³µì¡ë„ê°€ ì¦ê°€í•œë‹¤.

# ğŸ“ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

## âœï¸ MobX

- `ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°`ê³¼ ë°˜ì‘í˜• í”„ë¡œê·¸ë˜ë° íŒ¨ëŸ¬ë‹¤ì„ì˜ ì˜í–¥ì„ ë°›ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ìƒíƒœ ë³€ê²½ ë¡œì§ì„ ë‹¨ìˆœí•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆê³ , ë³µì¡í•œ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ìœ„ì„í•  ìˆ˜ ìˆë‹¤.
- ë‹¤ë§Œ ë°ì´í„°ê°€ ì–¸ì œ, ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ ì¶”ì í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì— íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì— ì–´ë ¤ì›€ì„ ê²ªì„ ìˆ˜ ìˆë‹¤.

```jsx
import React from "react";
import ReactDOM from "react-dom";
import { makeAutoObservable } from "mobx";
import { observer } from "mobx-react";

// ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ ëª¨ë¸ë§í•©ë‹ˆë‹¤.
class Timer {
  secondsPassed = 0;

  constructor() {
    makeAutoObservable(this);
  }

  increase() {
    this.secondsPassed += 1;
  }

  reset() {
    this.secondsPassed = 0;
  }
}

const myTimer = new Timer();

// observable stateë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.
const TimerView = observer(({ timer }) => (
  <button onClick={() => timer.reset()}>
    Seconds passed: {timer.secondsPassed}
  </button>
));

ReactDOM.render(<TimerView timer={myTimer} />, document.body);

// ë§¤ì´ˆë§ˆë‹¤ Seconds passed: Xë¥¼ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.
setInterval(() => {
  myTimer.increase();
}, 1000);
```

- ë¦¬ë Œë”ë§ ëŒ€ìƒì´ ë˜ëŠ” ìƒíƒœë¥¼ ê´€ì°° ëŒ€ìƒ(observable value)ë¼ê³  ì¹­í•˜ë©° `observable`ë¡œ ì§€ì •í•œ ìƒíƒœëŠ” ê´€ì°°ëŒ€ìƒìœ¼ë¡œ ì§€ì •ë˜ê³  ê·¸ ìƒíƒœëŠ” ê°’ì´ ë³€ê²½ë  ë•Œ ë§ˆë‹¤ ë¦¬ë Œë”ë§ë©ë‹ˆë‹¤.

## âœï¸ Redux

- í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ ì˜í–¥ì„ ë°›ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬
- íŠ¹ì • UI í”„ë ˆì„ì›Œí¬ì— ì¢…ì†ë˜ì§€ ì•Šì•„ ë…ë¦½ì ìœ¼ë¡œ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ìƒíƒœ ë³€ê²½ ì¶”ì ì— ìµœì í™”ë˜ì–´ ìˆì–´, íŠ¹ì • ìƒí™©ì—ì„œ ë°œìƒí•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¬¸ì œì˜ ì›ì¸ì„ íŒŒì•…í•˜ëŠ” ë° ìš©ì´í•˜ë‹¤.
- í•˜ì§€ë§Œ ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ê°€ ë§ì´ í•„ìš”í•˜ê³ , ì‚¬ìš© ë‚œë„ê°€ ë†’ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.

```jsx
import { createStore } from "redux";

function counter(state = 0, action) {
  switch (action.type) {
    case "PLUS":
      return state + 1;
    case "MINUS":
      return state - 1;
    default:
      return state;
  }
}

let store = createStore(counter);
store.subscribe(() => console.log(store.getState()));
store.dispatch({ type: "PLUS" }); // 1
store.dispatch({ type: "PLUS" }); // 2
store.dispatch({ type: "MINUS" }); // 1
```

<img src="redux.png" />

### Store(ìŠ¤í† ì–´)

- ìƒíƒœê°€ ê´€ë¦¬ë˜ëŠ” ì˜¤ì§ í•˜ë‚˜ì˜ ê³µê°„
- ì»´í¬ë„ŒíŠ¸ì™€ëŠ” ë³„ê°œë¡œ ìŠ¤í† ì–´ë¼ëŠ” ê³µê°„ì´ ìˆì–´ì„œ ê·¸ ìŠ¤í† ì–´ ì•ˆì— ì•±ì—ì„œ í•„ìš”í•œ ìƒíƒœë¥¼ ë‹´ëŠ”ë‹¤.
- ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœ ì •ë³´ê°€ í•„ìš”í•  ë•Œ ìŠ¤í† ì–´ì— ì ‘ê·¼í•œë‹¤.

### Action(ì•¡ì…˜)

- ì•±ì—ì„œ ìŠ¤í† ì–´ì— ìš´ë°˜í•  ë°ì´í„°
- ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ í˜•ì‹ìœ¼ë¡œ ë˜ì–´ìˆë‹¤.

### Reducer(ë¦¬ë“€ì„œ)

- Actionì„ Storeì— ë°”ë¡œ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.
- Action -> Reducer(ë¦¬ë“€ì„œëŠ” ì£¼ë¬¸ì„ ë³´ê³  ìŠ¤í† ì–´ì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤) -> Store
- Actionì„ Reducerì— ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ” `dispatch()` ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.

## âœï¸ Recoil

- ìƒíƒœë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” `Atom`ê³¼ í•´ë‹¹ ìƒíƒœë¥¼ ë³€í˜•í•  ìˆ˜ ìˆëŠ” ìˆœìˆ˜ í•¨ìˆ˜ `selector`ë¥¼ í†µí•´ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
- Reduxì— ë¹„í•´ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ê°€ ì ê³  ë‚œì´ë„ê°€ ì‰½ë‹¤.
- ì ì€ ì—…ë°ì´íŠ¸ ì£¼ê¸°, ë©”ì¸ ê°œë°œìì˜ í‡´ì§ìœ¼ë¡œ ì¸í•´ ì‹ ë¢°ë„ê°€ ë–¨ì–´ì§„ í¸ì´ë¼ ê°œì¸ì ìœ¼ë¡œëŠ” ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ì²œí•œë‹¤.
- [ê´€ë ¨ ë¸”ë¡œê·¸](https://medium.com/@clockclcok/recoil-%EC%9D%B4%EC%A0%9C%EB%8A%94-%EB%96%A0%EB%82%98-%EB%B3%B4%EB%82%BC-%EC%8B%9C%EA%B0%84%EC%9D%B4%EB%8B%A4-ff2c8674cdd5)

## âœï¸ Zustand

- Flux íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©° ë§ì€ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” í›… ê¸°ë°˜ì˜ í¸ë¦¬í•œ API ëª¨ë“ˆì„ ì œê³µí•œë‹¤.
- í´ë¡œì €ë¥¼ í™œìš©í•˜ì—¬ ìŠ¤í† ì–´ ë‚´ë¶€ ìƒíƒœë¥¼ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ íŠ¹ì • ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì¢…ì†ë˜ì§€ ì•ŠëŠ” íŠ¹ì§•ì´ ìˆë‹¤.
- ìƒíƒœì™€ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ì•¡ì…˜ì„ ì •ì˜í•˜ê³  ë°˜í™˜ëœ í›…ì„ ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì—ì„œë‚˜ ì„í¬íŠ¸í•˜ì—¬ ì›í•˜ëŠ” ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```tsx
import { create } from "zustand";

const useBearStore = create((set) => ({
  bears: 0,
  increasePopulation: () => set((state) => ({ bears: state.bears + 1 })),
  removeAllBears: () => set({ bears: 0 }),
}));

function BearCounter() {
  const bears = useBearStore((state) => state.bears);
  return <h1>{bears} around here ...</h1>;
}

function Controls() {
  const increasePopulation = useBearStore((state) => state.increasePopulation);
  return <button onClick={increasePopulation}>Plus</button>;
}
```
