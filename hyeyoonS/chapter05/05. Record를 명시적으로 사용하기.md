# Recordë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸°

### 1. ë¬´í•œí•œ í‚¤ë¥¼ ì§‘í•©ìœ¼ë¡œ ê°€ì§€ëŠ” Record

```tsx
type Category = string;
interface Food {
  name: string;
  // ...
}
const foodByCategory: Record<Category, Food[]> = {
  í•œì‹: [{ name: "ì œìœ¡ë®ë°¥" }, { name: "ëšë°°ê¸° ë¶ˆê³ ê¸°" }],
  ì¼ì‹: [{ name: "ì´ˆë°¥" }, { name: "í…ë™" }],
};
```

ê°ì²´Â `foodByCatgory`ëŠ” string íƒ€ì…ì¸Â `Category`ë¥¼ Recordì˜ í‚¤ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë¬´í•œí•œ í‚¤ ì§‘í•©ì´ë‹¤.
í‚¤ë¡œ "í•œì‹", "ì¼ì‹"ì´ ì•„ë‹Œ `ì—†ëŠ” í‚¤ ê°’`(ex. "ì–‘ì‹")ì„ ì‚¬ìš©í•˜ë”ë¼ë„ ì»´íŒŒì¼ ì˜¤ë¥˜ ì—†ì´ `undefined`ê°€ ëœë‹¤.

```tsx
foodByCategory["ì–‘ì‹"]; // Food[]ë¡œ ì¶”ë¡ 
console.log(foodByCategory["ì–‘ì‹"]); // ? undefined
foodByCategory["ì–‘ì‹"].map((food) => console.log(food.name)); // ğŸš¨ runTime ERROR : Cannot read properties of undefined (reading â€˜mapâ€™)
```

undefinedë¡œ ì¸í•œ ëŸ°íƒ€ì„ ì—ëŸ¬ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ ì˜µì…”ë„ ì²´ì´ë‹(`?.`)ì„ ì‚¬ìš©í•œë‹¤.

```tsx
foodByCategory["ì–‘ì‹"]?.map((food) => console.log(food.name)); // âœ…
```

í•˜ì§€ë§Œ ì´ ê²½ìš°, ê°’ì´ `undefinedê°€ ë  ìˆ˜ ìˆìŒì„ ì¸ì§€`í•˜ê³  ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•˜ë¯€ë¡œ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

### 2. ìœ ë‹› íƒ€ì…ìœ¼ë¡œ ë³€ê²½í•˜ê¸°

í‚¤ê°€ `ìœ í•œí•œ ì§‘í•©`ì´ë¼ë©´ ìœ ë‹› íƒ€ì…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ìœ ë‹› íƒ€ì…ì„ ì‚¬ìš©í•˜ê³ Â `foodByCategory`ì— ì—†ëŠ” í‚¤ ê°’ì„ ì‚¬ìš©í•˜ë©´ ì˜¤ë¥˜ê°€ ë‚˜íƒ€ë‚œë‹¤.

```tsx
// before
type Category = string;

// after
type Category = "í•œì‹" | "ì¼ì‹";
```

```tsx
foodByCategory["ì–‘ì‹"]; // ğŸš¨ ERROR : Property 'ì–‘ì‹' does not exist on type 'Record<Category, Food[]>'.
```

í•˜ì§€ë§Œ í‚¤ê°€ ë¬´í•œì¸ ê²½ìš°ì—ëŠ” í™œìš©í•  ìˆ˜ ì—†ë‹¤.

### **3. Partialì„ í™œìš©í•˜ì—¬ ì •í™•í•œ íƒ€ì… í‘œí˜„í•˜ê¸°**

> **ğŸ¤” `Partial?`**
íŠ¹ì • ê°ì²´ íƒ€ì…ì˜ ëª¨ë“  í”„ë¡œí¼í‹°ë¥¼ `ì„ íƒì  í”„ë¡œí¼í‹°`ë¡œ ë³€í™˜í•œë‹¤.
ë”°ë¼ì„œ ê¸°ì¡´ ê°ì²´ íƒ€ì…ì— ì •ì˜ëœ í”„ë¡œí¼í‹°ë“¤ ì¤‘ ì¼ë¶€ë¶„ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.
> 

```tsx
//Partialíƒ€ì…ì˜ ì˜ˆì‹œ

interface Post {
  title: string;
  tags: string[];
  content: string;
  thumbnailURL?: string;
}

const draft: Partial<Post> = {
  title: "ì œëª© ë‚˜ì¤‘ì— ì§“ì",
  content: "ì´ˆì•ˆ...",
};
// Partial<Post> íƒ€ì…ì€ ëª¨ë“  í”„ë¡œí¼í‹°ê°€ ì„ íƒì  í”„ë¡œí¼í‹°ê°€ ëœ Post íƒ€ì…ê³¼ ê°™ë‹¤.
```

í‚¤ê°€ ë¬´í•œí•˜ë‹¤ë©´ Â partialì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ê°’ì´ undefinedì¼ ìˆ˜ ìˆëŠ” ìƒíƒœì„ì„ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

ê°ì²´ ê°’ì´ undefinedì¼ ìˆ˜ ìˆëŠ” ê²½ìš°ì— Partialì„ ì‚¬ìš©í•´ì„œ PartialRecord íƒ€ì…ì„ ì„ ì–¸í•œë‹¤.

```tsx
type PartialRecord<K extends string, T> = Partial<Record<K, T>>;
```

```tsx
// before
const foodByCategory: Record<Category, Food[]> = {
  í•œì‹: [{ name: "ì œìœ¡ë®ë°¥" }, { name: "ëšë°°ê¸° ë¶ˆê³ ê¸°" }],
  ì¼ì‹: [{ name: "ì´ˆë°¥" }, { name: "í…ë™" }],
};

foodByCategory["ì–‘ì‹"]; // Food[]ë¡œ ì¶”ë¡ 

// after
const foodByCategory: PartialRecord<Category, Food[]> = {
  í•œì‹: [{ name: "ì œìœ¡ë®ë°¥" }, { name: "ëšë°°ê¸° ë¶ˆê³ ê¸°" }],
  ì¼ì‹: [{ name: "ì´ˆë°¥" }, { name: "í…ë™" }],
};

foodByCategory["ì–‘ì‹"]; // Food[] ë˜ëŠ” undefined íƒ€ì…ìœ¼ë¡œ ì¶”ë¡ 
```

ê°ì²´Â foodByCatgoryëŠ” `ë¬´í•œí•œ í‚¤ ì§‘í•©`ì„ ê°€ì§€ê³ , ì—†ëŠ” í‚¤ê°’ì„ ì‚¬ìš©í•˜ë”ë¼ë„ `ì»´íŒŒì¼ ì˜¤ë¥˜`ë¥¼ ë°˜í™˜í•œë‹¤.

```tsx
// before (Record)
foodByCategory["ì–‘ì‹"].map((food) => console.log(food.name)); // ğŸš¨ runTime ERROR : Cannot read properties of undefined (reading â€˜mapâ€™)

// after (PartialRecord)
foodByCategory["ì–‘ì‹"].map((food) => console.log(food.name)); // ğŸš¨ ERROR : Object is possibly 'undefined'
```

ğŸ¤”**ì´ë ‡ê²Œ í•˜ë©´ ë­ê°€ ì¢‹ì§€?** 

ì˜¤ë¥˜ê°€ ì‚¬ë¼ì§„ ê²ƒì´ ì•„ë‹ˆë¼, `runTime` Error (before) â‡’ `comfile` Error (after)  ë¡œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ì‹œì ì´ ë‹¬ë¼ì¡Œë‹¤.

â‡’ ì»´íŒŒì¼ ì˜¤ë¥˜ë¥¼ í™•ì¸í•œ í›„ì—!!  ì˜µì…”ë„ ì²´ì´ë‹(`?.`)ì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ì „ ì¡°ì¹˜ë¥¼ í•˜ë©´ ëœë‹¤. 

```tsx
foodByCategory["ì–‘ì‹"]?.map((food) => console.log(food.name)); // âœ…
```
